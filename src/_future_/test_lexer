TOKEN /[A-Za-z_][A-Za-z0-9_]*/
DIRECTIVE /%[a-z]+/
QUOTEDSTR /"(\\.|[^"\\])*"/
NUMBER /[-+]?[0-9]+/
EQUALS /=/
NEWMODE /->/
_skip_ /[ \t\n]+/

----

# this is 8-bit ascii; same concept works for 21-bit unicode, with larger numbers obviously

n00 <>n07 <>n15 <>n33 <>n43 <>n47 <>n53 <>n59

# n07-n08 TOKEN /[A-Za-z_][A-Za-z0-9_]*/
n01 <41-5A>n02 <5F-5F>n02 <61-7A>n02
n02 <>n05
n03 <30-39>n04 <41-5A>n04 <5F-5F>n04 <61-7A>n04
n04 <>n06
n05 <>n03 <>n06
n06 <>n05 <>n08
n07 <>n01
n08 <>(TOKEN)

# n15-n16 DIRECTIVE /%[a-z]+/
n09 <25-25>n10
n10 <>n13
n11 <61-7A>n12
n12 <>n14
n13 <>n11
n14 <>n13 <>n16
n15 <>n09
n16 <>(DIRECTIVE)

# n33-n34 QUOTEDSTR /"(\\.|[^"\\])*"/
n17 <22-22>n18
n18 <>n29
n19 <5C-5C>n20
n20 <>n21
n21 <00-09>n22 <0B-FF>n22
n22 <>n26
n23 <00-21>n24 <23-5B>n24 <5D-FF>n24
n24 <>n26
n25 <>n19 <>n23
n26 <>n28
n27 <>n25
n28 <>n30
n29 <>n27 <>n30
n30 <>n29 <>n31
n31 <22-22>n32
n32 <>n34
n33 <>n17
n34 <>(QUOTEDSTR)

# n43-n44 NUMBER /[-+]?[0-9]+/
n35 <2B-2B>n36 <2D-2D>n36
n36 <>n38
n37 <>n35 <>n38
n38 <>n41
n39 <30-39>n40
n40 <>n42
n41 <>n39
n42 <>n41 <>n44
n43 <>n37
n44 <>(NUMBER)

# n47-n48 EQUALS /=/
n45 <3D-3D>n46
n46 <>n48
n47 <>n45
n48 <>(EQUALS)

# n53-n54 NEWMODE /->/
n49 <2D-2D>n50
n50 <>n51
n51 <3E-3E>n52
n52 <>n54
n53 <>n49
n54 <>(NEWMODE)

# n59-n60 _skip_ /[ \t\n]+/
n55 <09-0A>n56 <20-20>n56
n56 <>n58
n57 <>n55
n58 <>n57 <>n60
n59 <>n57
n60 <>(_skip_)

